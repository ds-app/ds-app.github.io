!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),t.exports=n(21)},function(t,e){"use strict";t.exports=angular.module("DongsuApp",["templates-html","ngTouch","rx"]).config(["$compileProvider","$httpProvider",function(t,e){t.debugInfoEnabled(!1),e.useApplyAsync(!0)}])},function(t,e,n){"use strict";function r(t){return function(e){return t.time(e)||"00:00"}}function i(t){return function(e){return t.minute(e)}}function o(t){return function(e){return t.date(e)}}function u(){return function(t){return t||"00:00"}}r.$inject=["Util"],i.$inject=["Util"],o.$inject=["Util"],n(1).filter("time",r).filter("minute",i).filter("date",o).filter("timeholder",u)},function(t,e,n){"use strict";n(1).service("$localStorage",function(){return localStorage})},function(t,e,n){"use strict";n(1).value("Sample",{"2016-05-23":{first:"2016-05-22T21:00:31.000Z",last:"2016-05-23T17:38:31.000Z",excepts:[{label:0,time:25},{label:1,time:73}],type:"8h"},"2016-05-24":{first:"2016-05-24T00:00:23.000Z",last:"2016-05-24T12:22:31.000Z",excepts:[{label:0,time:25},{label:1,time:53}],type:"8h"},"2016-05-25":{first:"2016-05-25T01:00:23.000Z",last:"2016-05-25T07:22:31.000Z",excepts:[{label:0,time:48},{label:1,time:23}],type:"4h"}})},function(t,e,n){"use strict";function r(t,e,n){function r(t){var e=moment(t).day();return 0==e||6==e?{excepts:[],type:h.DAY_OFF}:{excepts:[],type:h.FULL}}function i(){var i=JSON.parse(t.getItem(o)||"{}");return _(e.workWeek()).map(function(t){return _.extend({},i[t]||r(t),{workDate:t})}).map(function(t){return _.extend(t,n.getWorkingTime(t))}).value()}function l(){return $}function f(){return _.find(k,function(t){return t.workDate==n.getWorkDate()})}function m(){return k}function d(){var e=_.map($,function(t){return _.pick(t,["name","color"])});t.setItem(u,JSON.stringify(e))}function p(){var e=_(k).keyBy("workDate").mapValues(function(t){return _.pick(t,["first","last","excepts","type"])}).value();t.setItem(o,JSON.stringify(e))}function v(t){var e=_.extend(t,n.getWorkingTime(t));return p(),e}var g=this,h=n.WORK_TYPE,k=i(),$=JSON.parse(t.getItem(u))||a;t.getItem(c)||s.OFF;g.load=m,g.today=f,g.update=v,g.getLabels=l,g.storeLabels=d}r.$inject=["$localStorage","Week","Time"],n(1).service("Storage",r);var i="DONSU@2.0-",o=i+"WORKS",u=i+"LABELS",c=i+"STATUS",a=[{name:"기타"},{name:"헬스",color:"#C05B4B"},{name:"",color:"#97A82D"},{name:"",color:"#F68923"}],s={ON:"ON",OFF:"OFF"}},function(t,e,n){"use strict";function r(t,e,n){function r(t){return n.Observable.interval(t).map(function(){return moment().startOf("minute")})}function i(){return a?u():o()}function o(){c=l.subscribe({onNext:function(n){t.$apply(function(){a=!0,s.first||(s.first=n.toISOString()),s.last=n.toISOString(),e.update(s),f.tick=!f.tick})}})}function u(){c&&c.dispose(),a=!1,f.tick=!1}var c,a=!1,s=e.today(),l=r(500),f={tick:!1,isRecording:function(){return a},toggle:i};return f}r.$inject=["$rootScope","Storage","rx"],n(1).factory("Ticker",r)},function(t,e,n){"use strict";function r(){function t(t){var e=moment(t);return e.utcOffset(e.utcOffset()-l).format("YYYY-MM-DD")}function e(t,e){return e!=i.DAY_OFF?0>t?0:240>t?t:270>t?240:480>t?t-30:t-60:Math.max(t,0)}function n(t,e){return e==i.DAY_OFF?0:Math.max(Math.min(t,720),0)}function r(t,e){return Math.max(t-_.sumBy(e,function(t){return t.time}),0)}function o(t){var e=t-480;return 120>e?0:240>e?2:360>e?4:6}function u(t){return 240>t?0:360>t?4:480>t?6:8}function c(t){return t.first&&t.last?a(t):{total:0,working:0,effective:0,extra:0}}function a(c){var a,s,f,m,d,p=moment(c.first),v=moment(c.last),g=t(p),h=t(v);return g>h?0:(h>g&&(v=moment(g).endOf("date").add(l,"m")),a=v.diff(p,"minutes"),s=e(a,c.type),f=n(s,c.type),m=r(s,c.excepts),d=c.type==i.DAY_OFF?u(m):o(m),{total:a,digested:s,working:f,effective:m,extra:d})}var s=this,l=300;s.getWorkDate=t,s.getWorkingTime=c,s.WORK_TYPE=i}n(1).service("Time",r);var i={DAY_OFF:"NA",HOLIDAY:"0h",HALF:"4h",FULL:"8h"}},function(t,e,n){"use strict";function r(){function t(t){var e=""+t;return("00"+e).substr(Math.min(e.length,2))}function e(e){if(e){var n,r;return n=parseInt(e/60),r=e-60*n,t(n)+":"+t(r)}}function n(t,e){return t?moment(t).format(e||"HH:mm"):void 0}function r(t,e){return t?moment(t).format(e||"MM/DD"):void 0}var i=this;i.time=e,i.minute=n,i.date=r}n(1).service("Util",r)},function(t,e,n){"use strict";function r(t){function e(e){e=e||0;var n=moment(t.getWorkDate());return n.subtract((n.day()+6)%7,"d"),n.add(7*e,"d"),_(7).range().map(function(t){return moment(n).add(t,"d").format("YYYY-MM-DD")}).reverse().value()}var n=this;n.workWeek=e}r.$inject=["Time"],n(1).service("Week",r)},function(t,e,n){"use strict";function r(t,e,n){function r(){return _(f).map(function(t){return t.type}).map(function(t){switch(t){case m.FULL:return 480;case m.HALF:return 240;default:return 0}}).sum()}function i(){return _(f).map(function(t){return t.working}).sum()}function o(){return Math.floor(100*i()/r())}function u(){return 100-o()}function c(){return{width:o()+"%"}}function a(){return{width:u()+"%"}}function s(){return n.tick}var l=this,f=e.load(),m=t.WORK_TYPE;l.today=e.today(),l.getFullWorkingTime=r,l.getTotalWorkedTime=i,l.getWorkedGauge=c,l.getRemainGauge=a,l.getTick=s}function i(){return{restrict:"E",templateUrl:"views/board.tpl.html",controller:r,controllerAs:"board"}}r.$inject=["Time","Storage","Ticker"],n(1).directive("dsBoard",i)},function(t,e,n){"use strict";function r(t,e,n){var r=n.dsChange;t.$watch(function(){return e.val()},function(e,n){e!==n&&t.$eval(r,{$value:e})}),e.on("change",function(){t.$apply()})}function i(){return{restrict:"A",controller:r}}r.$inject=["$scope","$element","$attrs"],n(1).directive("dsChange",i)},function(t,e,n){"use strict";function r(t,e,n){var r=n.dsTimeValue;t.$watch(r,function(t,n){e.val(t)})}function i(){return{restrict:"A",controller:r}}r.$inject=["$scope","$element","$attrs"],n(1).directive("dsTimeValue",i)},function(t,e,n){"use strict";function r(t,e,n){function r(){d.first=e.minute(p.first),d.last=e.minute(p.last)}function i(){return _.sumBy(p.excepts,"time")}function o(t,e){if(t){var n=moment(t,"HH:mm"),r=moment(e);return r.hours(n.hours()),r.minutes(n.minutes()),r.toISOString()}}function u(t){return p.first=o(t,p.first),n.update(p)}function c(t){return p.last=o(t,p.last),n.update(p)}function a(t){t||(d.modify=!1,d.flip=!0)}function s(t){d.lap=t}function l(t){var e=d.lap.val();e&&(p.excepts.push({label:_.findIndex(n.getLabels(),t),time:e}),n.update(p),a())}function f(t){var e=_.findIndex(p.excepts,t),r=confirm("Are you sure you want delete?");r&&e>=0&&(p.excepts.splice(e,1),n.update(p))}function m(t){return!!t.name}var d=this,p=t.$eval("works");d.getTotal=i,d.setFirst=u,d.setLast=c,d.addLap=s,d.add=l,d.remove=f,d.flip=!0,d.labelFilter=m,t.$watch("work.flip",a),t.$watch("week.edit",a),t.$watch(function(){return p.first},r),t.$watch(function(){return p.last},r)}function i(){return{restrict:"E",templateUrl:"views/excepts.tpl.html",controller:r,controllerAs:"excepts"}}r.$inject=["$scope","Util","Storage"],n(1).directive("dsExcepts",i)},function(t,e,n){"use strict";function r(t,e,n,r){function i(){u.name=c.name,e.css({"background-color":c.color||"#90AFAA"}),t.$watch("label.name",function(t){c.name=t,r.storeLabels()})}function o(){return t.$eval(a)}var u=this,c=t.$eval(n.label),a=n.modify;u.isEditable=o,i()}function i(){return{template:'<span class="label"><input type="text" ng-model="label.name" ng-disabled="!label.isEditable()"/></span>',replace:!0,controller:r,controllerAs:"label"}}r.$inject=["$scope","$element","$attrs","Storage"],n(1).directive("dsLabel",i)},function(t,e,n){"use strict";function r(t,e){function n(){t.$apply()}function r(t){return 0==t||t>0}function i(t,e,n){return e>t?e:t>n?n:t}function o(){24==l.hours&&l.minute>0&&(l.hours=23),a.val(r(l.hours)?l.hours:""),s.val(r(l.minute)?l.minute:"")}function u(t){if(r(t))l.hours=i(~~(t/60),0,24),l.minute=t%60,o();else if(""==t)l.hours=void 0,l.minute=void 0,o();else if(void 0!=l.hours||void 0!=l.minute)return 60*(l.hours||0)+(l.minute||0)}var c=this,a=e.find(".lap_time_hours"),s=e.find(".lap_time_minute"),l={hours:void 0,minute:void 0};c.val=u,a.on("change",n),s.on("change",n),t.$watch("excepts.flip",function(t){t&&u("")}),t.$watch(function(){return a.val()},function(t){""!=t&&(l.hours=i(+t,0,24),o())}),t.$watch(function(){return s.val()},function(t){""!=t&&(l.minute=i(+t,0,59),o())}),c.onLoad({$lap:c})}function i(){return{restrict:"E",templateUrl:"views/lapTime.tpl.html",scope:{onLoad:"&"},controller:r,controllerAs:"lap",bindToController:!0}}r.$inject=["$scope","$element"],n(1).directive("lapTime",i)},function(t,e,n){"use strict";function r(t){var e=this;e.data=t.load()}function i(){return{restrict:"E",templateUrl:"views/main.tpl.html",controller:r,controllerAs:"main"}}r.$inject=["Storage"],n(1).directive("dsMain",i)},function(t,e,n){"use strict";function r(t,e,n){function r(t){return a.type==t}function i(){return s?"Today":n.date(a.workDate)}function o(){return s}function u(t){return a.type=t}var c=this,a=t.$eval("works"),s=a.workDate==e.getWorkDate();c.work=a,c.isSelected=r,c.getDate=i,c.isToday=o,c.select=u}function i(){return{restrict:"A",templateUrl:"views/mode.tpl.html",replace:!0,controller:r,controllerAs:"mode"}}r.$inject=["$scope","Time","Util"],n(1).directive("dsMode",i)},function(t,e,n){"use strict";function r(){var t=this;t.flip=!0}function i(){return{restrict:"E",templateUrl:"views/summaries.tpl.html",controller:r,controllerAs:"summaries"}}n(1).directive("dsSummaries",i)},function(t,e,n){"use strict";function r(t){function e(){n.edit=!n.edit}var n=this;n.toggle=e,n.edit=!1,n.labels=t.getLabels()}function i(){return{restrict:"E",templateUrl:"views/week.tpl.html",controller:r,controllerAs:"week"}}r.$inject=["Storage"],n(1).directive("dsWeek",i)},function(t,e,n){"use strict";function r(t,e,n){function r(){u.flip=!u.flip}function i(){return a?"Today":n.date(c.workDate)}function o(){return a}var u=this,c=t.$eval("works"),a=c.workDate==e.getWorkDate();u.work=c,u.flip=!a,u.toggle=r,u.getDate=i,u.isToday=o}function i(){return{restrict:"A",templateUrl:"views/work.tpl.html",replace:!0,controller:r,controllerAs:"work"}}r.$inject=["$scope","Time","Util"],n(1).directive("dsWork",i)},function(t,e,n){"use strict";function r(t){function e(){return t.tick}var n=this;n.isRecording=t.isRecording,n.toggle=t.toggle,n.getTick=e}function i(){return{restrict:"E",templateUrl:"views/workBtn.tpl.html",controller:r,controllerAs:"btns"}}r.$inject=["Ticker"],n(1).directive("dsWorkBtn",i)}]);